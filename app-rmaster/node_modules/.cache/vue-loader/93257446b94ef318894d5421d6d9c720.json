{"remainingRequest":"/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/src/pages/UserControl.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/src/pages/UserControl.vue","mtime":1596627011600},{"path":"/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/keisei.matsumoto/Workspace/rmaster-ui/app-rmaster/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY3VzdG9tLXNlbGVjdG9yCiAgZm9udC1zaXplIDNlbQogIEBtZWRpYSAkZGlzcGxheS1icmVha3BvaW50cy54cy1vbmx5CiAgICBmb250LXNpemUgMmVtCiAgQG1lZGlhICRkaXNwbGF5LWJyZWFrcG9pbnRzLmxnLWFuZC11cAogICAgZm9udC1zaXplIDVlbQo="},{"version":3,"sources":["UserControl.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;AACA","file":"UserControl.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <v-row>\n    <v-col\n      cols=12\n      xs=6\n      sm=6\n      md=6\n      lg=4\n      xl=4\n    >\n      <v-card\n        class=\"ma-3 pa-4\"\n        outlined\n      >\n        <ValidationObserver ref=\"observer\" v-slot=\"{ invalid }\">\n          <ValidationProvider name=\"名前\" rules=\"required|max:25\" v-slot=\"{ errors }\">\n            <v-text-field\n              :counter=\"25\"\n              single-line\n              label=\"名前\"\n              v-model=\"userName\"\n              :error-messages=\"errors\"\n            ></v-text-field>\n          </ValidationProvider>\n          <ValidationProvider name=\"名前(かな)\" rules=\"required|max:25|isHiragana\" v-slot=\"{ errors }\">\n            <v-text-field\n              :counter=\"25\"\n              single-line\n              label=\"名前(かな)\"\n              v-model=\"userNameKana\"\n              :error-messages=\"errors\"\n            ></v-text-field>\n          </ValidationProvider>\n          <v-radio-group v-model=\"gender\" row>\n            <v-radio label=\"男性\" :value=\"1\"></v-radio>\n            <v-radio label=\"女性\" :value=\"2\"></v-radio>\n          </v-radio-group>      \n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn \n              outlined\n              color=\"primary\"\n              v-on:click=\"add\"\n              :loading=\"addLoading\"\n              :disabled=\"addLoading || invalid\"\n            >\n              新規追加\n            </v-btn>\n          </v-card-actions>\n        </ValidationObserver>\n      </v-card>\n    </v-col>\n    <v-col\n      v-for=\"(user, index) in users\" :key=\"user.id\"\n      cols=12\n      xs=6\n      sm=6\n      md=6\n      lg=4\n      xl=4\n    >\n      <v-card\n        class=\"ma-3 pa-4\"\n        outlined\n      >\n        <ValidationObserver v-slot=\"{ invalid }\">\n          <ValidationProvider name=\"名前\" rules=\"required|max:25\" v-slot=\"{ errors }\">\n            <v-text-field\n              :counter=\"25\"\n              single-line\n              v-model=\"user.name\"\n              label=\"名前\"\n              :error-messages=\"errors\"\n            ></v-text-field>\n          </ValidationProvider>\n          <ValidationProvider name=\"名前(かな)\" rules=\"required|max:25|isHiragana\" v-slot=\"{ errors }\">\n            <v-text-field\n              :counter=\"25\"\n              single-line\n              v-model=\"user.name_kana\"\n              label=\"名前(かな)\"\n              :error-messages=\"errors\"\n            ></v-text-field>\n          </ValidationProvider>\n          <v-radio-group v-model=\"user.gender\" row>\n            <v-radio label=\"男性\" :value=\"1\"></v-radio>\n            <v-radio label=\"女性\" :value=\"2\"></v-radio>\n          </v-radio-group>      \n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn \n              outlined \n              color=\"primary\" \n              :data_id=user.id \n              :data_index=index\n              v-on:click=\"update\"\n              :disabled=\"invalid\"\n              :loading=\"updateLoading[index]\"\n            >\n              保存\n            </v-btn>\n            <v-btn \n              outlined \n              color=\"error\" \n              :data_id=user.id \n              v-on:click=\"dialog = true\"\n            >\n              削除\n            </v-btn>\n          </v-card-actions>\n        </ValidationObserver>\n      </v-card>\n    </v-col>\n    <v-dialog\n      v-model=\"dialog\"\n      max-width=\"290\"\n    >\n      <v-card>\n        <v-card-title class=\"custom-selector headline\">本当に削除しますか？</v-card-title>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            outlined \n            color=\"primary\" \n            @click=\"dialog = false\"\n          >\n            はい\n          </v-btn>\n          <v-btn\n            outlined \n            color=\"error\" \n            @click=\"dialog = false\"\n          >\n            いいえ\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-row>\n</template>\n\n<script>\nimport axios from 'axios'\nimport { ValidationProvider, ValidationObserver } from 'vee-validate';\n\nexport default {\n  name: 'UserControl',\n  components: {\n    ValidationProvider,\n    ValidationObserver\n  },\n  data: function () {\n    return {\n      userName: '',\n      userNameKana: '',\n      gender: 1,\n      users: [],\n      addLoading: false,\n      updateLoading: [],\n      dialog: false,\n    }\n  },\n  mounted: function(){\n    this.get()\n  },\n  methods: {\n    add: function () {\n      this.addLoading = true\n      axios.post('http://54.150.76.124/api/user', { \n        name: this.userName, \n        name_kana: this.userNameKana, \n        gender: this.gender \n      })\n      .then(this.get)\n      .then(this.init_add)\n      .then(this.$refs.observer.reset())\n      .finally(() => this.addLoading = false)\n    },\n    update: function () {\n      const index = event.currentTarget.getAttribute('data_index')\n      this.updateLoading[0] = true\n      axios.patch('http://54.150.76.124/api/user/' + this.users[index].id, { \n        name: this.users[index].name, \n        name_kana: this.users[index].name_kana, \n        gender: this.users[index].gender \n      })\n      .then(this.get)\n    },\n    remove: function () {\n      axios.delete('http://54.150.76.124/api/user/' + event.currentTarget.getAttribute('data_id'))\n      .then(this.get)\n    },\n    get: function () {\n      axios.get('http://54.150.76.124/api/user')\n      .then(response => (this.users = response.data.reverse()))\n      .then(this.init_update_loading)\n    },\n    init_add: function () {\n      this.userName = ''\n      this.userNameKana = ''\n      this.gender = 1\n    },\n    init_update_loading: function () {\n      this.updateLoading = Array(this.users.length)\n      this.updateLoading.fill(false)\n      console.log(this.updateLoading)\n    }\n  }\n}\n</script>\n\n<style>\n.custom-selector\n  font-size 3em\n  @media $display-breakpoints.xs-only\n    font-size 2em\n  @media $display-breakpoints.lg-and-up\n    font-size 5em\n</style>"]}]}